var app=angular.module("casting",["ngRoute","firebase","appCtrls"]),appCtrls=angular.module("appCtrls",[]);app.config(["$routeProvider",function(e){e.when("/home",{templateUrl:"views/home.html",controller:"HomeCtrl"}).when("/apply",{templateUrl:"views/apply.html",controller:"ApplyCtrl"}).when("/register",{templateUrl:"views/register.html",controller:"RegisterCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"RegisterCtrl"}).otherwise({redirectTo:"/home"})}]),app.controller("HomeCtrl",["$scope","$firebase",function(e,a){var t=new Firebase("https://casting.firebaseio.com/home"),r=a(t);e.messages=r.$asArray(),e.username="Director"+Math.floor(101*Math.random()),e.addMessage=function(a){13==a.keyCode&&e.messages.$add({from:e.username,text:e.newMessage}).then(function(){e.newMessage=""})}}]),app.controller("ApplyCtrl",["$scope","$firebase",function(e,a){var t=new Firebase("https://casting.firebaseio.com/applications"),r=a(t);e.applications=r.$asArray(),e.apply=function(){e.applications.$add({name:e.name,phone:e.phone,email:e.email,height:e.height,weight:e.weight,hair:e.hair,eye:e.eye,dob:e.dob,film:e.film,tv:e.tv,theatre:e.theatre,commercial:e.commercial,education:e.education,training:e.training,skills:e.skills}).then(function(){e.name="",e.phone="",e.email="",e.height="",e.weight="",e.hair="",e.eye="",e.dob="",e.film="",e.tv="",e.theatre="",e.commercial="",e.education="",e.training="",e.skills="",e.applicationForm.$setUntouched(),$location.path("/home")})}}]),app.controller("RegisterCtrl",function(e,a,t,r,i){var n=new Firebase("https://casting.firebaseio.com/users");e.authObj=t(n),e.sync=a(n),e.newUser=e.sync.$asObject(),e.register=function(){e.authObj.$createUser({email:e.user.email,password:e.user.password}).then(function(){return e.authObj.$authWithPassword({email:e.user.email,password:e.user.password})}).then(function(a){i.authData=a,console.log("data",a),e.sync.$set(a.uid,{uid:a.uid,fname:e.user.fname,lname:e.user.lname,email:e.user.email}),r.path("/home")})}});