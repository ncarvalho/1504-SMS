var app=angular.module("casting",["ngRoute","firebase","appCtrls","dcbImgFallback"]),appCtrls=angular.module("appCtrls",[]);app.config(["$routeProvider",function(e){e.when("/home",{templateUrl:"views/home.html",controller:"HomeCtrl"}).when("/apply",{templateUrl:"views/apply.html",controller:"ApplyCtrl"}).when("/applicant/:applicantID",{templateUrl:"views/details.html",controller:"ApplicantCtrl"}).when("/register",{templateUrl:"views/register.html",controller:"RegisterCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"RegisterCtrl"}).otherwise({redirectTo:"/home"})}]),app.controller("ApplyCtrl",["$scope","$firebase","$location",function(e,t,a){var o=new Firebase("https://casting.firebaseio.com/applications"),r=t(o);e.applications=r.$asArray(),e.apply=function(){e.applications.$add(e.application).then(function(){e.application={},e.applicationForm.$setUntouched(),a.path("/home")})}}]),app.controller("ApplicantCtrl",["$scope","$firebase","$routeParams",function(e,t,a){var o=new Firebase("https://casting.firebaseio.com/applications/"+a.applicantID);e.sync=t(o),e.currentApplicant=e.sync.$asObject(),console.log(e.currentApplicant)}]),app.controller("RegisterCtrl",["$scope","$location","$firebase","$firebaseAuth","$rootScope",function(e,t,a,o,r){var s=new Firebase("https://casting.firebaseio.com/users");e.authObj=o(s),e.sync=a(s),e.newUser=e.sync.$asObject(),e.register=function(){e.authObj.$createUser({email:e.user.email,password:e.user.password}).then(function(){return e.authObj.$authWithPassword({email:e.user.email,password:e.user.password})}).then(function(a){r.authData=a,console.log("data",a),e.sync.$set(a.uid,e.user),t.path("/home")})},e.login=function(){e.authObj.$authWithPassword({email:e.user.email,password:e.user.password}).then(function(){t.path("/home")}).catch(function(e){console.log(e),t.path("/login")})}}]),app.controller("StatusCtrl",["$scope","$location","$firebase","$firebaseAuth","$rootScope",function(e,t,a,o,r){r.$on("$firebaseAuth:login",function(t,a){console.log("email: ",a),e.userEmail=a.email})}]),app.controller("HomeCtrl",["$scope","$location","$firebase","$firebaseAuth","$rootScope",function(e,t,a){var o=new Firebase("https://casting.firebaseio.com/home"),r=a(o);e.messages=r.$asArray(),e.username="Director"+Math.floor(101*Math.random()),e.addMessage=function(t){13==t.keyCode&&e.messages.$add({from:e.username,text:e.newMessage}).then(function(){e.newMessage=""})}}]);